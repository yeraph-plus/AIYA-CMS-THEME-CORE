## aiya-theme-framework

![截图](https://github.com/yeraph-plus/aiya-theme-core/blob/master/screenshot/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-12-03%20112645.png)

一个用于为 WordPress 主题创建设置页面、分类 Meta 字段和文章 MetaBox 组件的选项框架，是 AIYA-CMS 主题的其中一部分。

这个项目目前尚未完工，表单功能中的“设置组”组件完全不可用，并且也不支持创建多重表单，因为这类表单通常是为主题的轮播/Banner/广告功能提供的，目前我写主题的进度距离这一块还有那么亿点点距离，所以暂时搁置了。

####如何使用：

参考 `add-functions.php` 的内容复制到主题的 `functions.php` 即可，其中包含了框架使用的常量名和引入文件。

如果只需要使用框架组件，只需引入 `setup.php` 并按照 `sample-config.php` 中提供的参数模板创建你自己的表单即可， `method.php` 包含了一些额外功能，详见后文说明。

####注意事项：

1、这个框架兼容多站点模式，但不是很确定是不是完全兼容，WP 官方的文档对于一些钩子的说明也不是很明确，或者也有可能是我太菜了没看懂。

2、 `method.php` 引入的实际上是 AIYA-CMS 主题的一部分，其中包含的功能如下：

- WP 后台自定义：包括标题、页脚、自定义仪表盘 Widget 等
- PHP 环境检查：检查 PHP 版本、拓展、以及 WP 版本等
- 优化功能：一些类似于各种 WP 优化插件提供的功能，头像加速页面精简功能禁用啊之类的
- 注册主题功能：这个是一些已经封装好的方法，只需提供参数就可以在 WP 中快速创建菜单、侧边栏位、自定义文章类型和自定义分类法
- 页面模板：通过 `add_rewrite_rule()` 方法直接在 WP 路由中注册页面并指向指定的页面模板，免去传统做法手动创建新页面然后添加短代码或者选取页面模板的麻烦
- SEO（插件）：普普通通的 SEO 优化功能插件，支持首页、分类、文章的自定义关键词和描述
- STMP 送信（插件）：普普通通的 STMP 送信功能

因为添加这些功能主要是为了测试整个框架的各种运用方式，其中一部分应该是失效的，毕竟尚未完工，也就完全没测试，如果有问题或者其他建议之类的可以 Issues。

####补丁：

理论上这个框架可以当作插件加载，但不建议，因为写的时候完全没考虑过插件兼容。

如果一定要用作插件的话请修改常量定义中的 `get_template_directory()` 和 `get_template_directory_uri()` 为 `plugin_dir_path()` 和 `plugins_url()` 。
